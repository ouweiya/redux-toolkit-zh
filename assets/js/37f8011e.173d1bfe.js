"use strict";(self.webpackChunkredux_toolkit_zh=self.webpackChunkredux_toolkit_zh||[]).push([[4488],{4977:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>o,contentTitle:()=>l,default:()=>u,frontMatter:()=>a,metadata:()=>d,toc:()=>s});var i=t(4848),r=t(8453);const a={id:"immutabilityMiddleware",title:"\u4e0d\u53d8\u6027\u4e2d\u95f4\u4ef6",sidebar_label:"\u4e0d\u53d8\u6027\u4e2d\u95f4\u4ef6",hide_title:!0},l="\u4e0d\u53d8\u6027\u4e2d\u95f4\u4ef6",d={id:"api/immutabilityMiddleware",title:"\u4e0d\u53d8\u6027\u4e2d\u95f4\u4ef6",description:"&nbsp;",source:"@site/docs/api/immutabilityMiddleware.mdx",sourceDirName:"api",slug:"/api/immutabilityMiddleware",permalink:"/redux-toolkit-zh/api/immutabilityMiddleware",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/api/immutabilityMiddleware.mdx",tags:[],version:"current",frontMatter:{id:"immutabilityMiddleware",title:"\u4e0d\u53d8\u6027\u4e2d\u95f4\u4ef6",sidebar_label:"\u4e0d\u53d8\u6027\u4e2d\u95f4\u4ef6",hide_title:!0},sidebar:"docs",previous:{title:"\u83b7\u53d6\u9ed8\u8ba4\u4e2d\u95f4\u4ef6",permalink:"/redux-toolkit-zh/api/getDefaultMiddleware"},next:{title:"\u53ef\u5e8f\u5217\u5316\u4e2d\u95f4\u4ef6",permalink:"/redux-toolkit-zh/api/serializabilityMiddleware"}},o={},s=[{value:"\u9009\u9879",id:"\u9009\u9879",level:2},{value:"\u5bfc\u51fa",id:"\u5bfc\u51fa",level:2},{value:"<code>createImmutableStateInvariantMiddleware</code>",id:"createimmutablestateinvariantmiddleware",level:3},{value:"<code>isImmutableDefault</code>",id:"isimmutabledefault",level:3}];function c(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",p:"p",pre:"pre",...(0,r.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(n.p,{children:"\xa0"}),"\n",(0,i.jsx)(n.h1,{id:"\u4e0d\u53d8\u6027\u4e2d\u95f4\u4ef6",children:"\u4e0d\u53d8\u6027\u4e2d\u95f4\u4ef6"}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u662f",(0,i.jsx)(n.a,{href:"https://github.com/leoasis/redux-immutable-state-invariant",children:(0,i.jsx)(n.code,{children:"redux-immutable-state-invariant"})}),"\u4e2d\u95f4\u4ef6\u7684\u4e00\u4e2a\u79fb\u690d\u7248\u672c\uff0c\u4e13\u95e8\u7528\u4e8eRedux Toolkit\u3002\u4efb\u4f55\u68c0\u6d4b\u5230\u7684\u53d8\u5f02\u90fd\u4f1a\u88ab\u629b\u51fa\u4e3a\u9519\u8bef\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u8fd9\u4e2a\u4e2d\u95f4\u4ef6\u9ed8\u8ba4\u7531",(0,i.jsx)(n.a,{href:"/redux-toolkit-zh/api/configureStore",children:(0,i.jsx)(n.code,{children:"configureStore"})}),"\u548c",(0,i.jsx)(n.a,{href:"/redux-toolkit-zh/api/getDefaultMiddleware",children:(0,i.jsx)(n.code,{children:"getDefaultMiddleware"})}),"\u6dfb\u52a0\u5230\u5b58\u50a8\u4e2d\u3002"]}),"\n",(0,i.jsxs)(n.p,{children:["\u4f60\u53ef\u4ee5\u901a\u8fc7\u5c06\u4efb\u4f55\u652f\u6301\u7684\u9009\u9879\u4f5c\u4e3a",(0,i.jsx)(n.code,{children:"getDefaultMiddleware"}),"\u7684",(0,i.jsx)(n.code,{children:"immutableCheck"}),"\u503c\u6765\u81ea\u5b9a\u4e49\u6b64\u4e2d\u95f4\u4ef6\u7684\u884c\u4e3a\u3002"]}),"\n",(0,i.jsx)(n.h2,{id:"\u9009\u9879",children:"\u9009\u9879"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",metastring:"no-transpile",children:"type IsImmutableFunc = (value: any) => boolean\n\ninterface ImmutableStateInvariantMiddlewareOptions {\n  /**\n    \u56de\u8c03\u51fd\u6570\uff0c\u7528\u4e8e\u68c0\u67e5\u4e00\u4e2a\u503c\u662f\u5426\u88ab\u8ba4\u4e3a\u662f\u4e0d\u53ef\u53d8\u7684\u3002\n    \u8fd9\u4e2a\u51fd\u6570\u4f1a\u9012\u5f52\u5e94\u7528\u5230\u72b6\u6001\u4e2d\u7684\u6bcf\u4e00\u4e2a\u503c\u3002\n    \u9ed8\u8ba4\u5b9e\u73b0\u4f1a\u5bf9\u539f\u59cb\u7c7b\u578b\u8fd4\u56detrue\n    \uff08\u5982\u6570\u5b57\u3001\u5b57\u7b26\u4e32\u3001\u5e03\u5c14\u503c\u3001null\u548cundefined\uff09\u3002\n   */\n  isImmutable?: IsImmutableFunc\n  /**\n    \u4e00\u4e2a\u7531\u70b9\u5206\u9694\u7684\u8def\u5f84\u5b57\u7b26\u4e32\u6570\u7ec4\u6216\u5339\u914d\u6765\u81ea\n    \u6839\u72b6\u6001\u7684\u547d\u540d\u8282\u70b9\u7684RegExps\uff0c\u5f53\u68c0\u67e5\u4e0d\u53d8\u6027\u65f6\u5ffd\u7565\u3002\n    \u9ed8\u8ba4\u4e3aundefined\n   */\n  ignoredPaths?: (string | RegExp)[]\n  /** \u5982\u679c\u68c0\u67e5\u8d85\u8fc7N\u6beb\u79d2\uff0c\u5219\u6253\u5370\u8b66\u544a\u3002\u9ed8\u8ba4\uff1a32ms */\n  warnAfter?: number\n}\n"})}),"\n",(0,i.jsx)(n.h2,{id:"\u5bfc\u51fa",children:"\u5bfc\u51fa"}),"\n",(0,i.jsx)(n.h3,{id:"createimmutablestateinvariantmiddleware",children:(0,i.jsx)(n.code,{children:"createImmutableStateInvariantMiddleware"})}),"\n",(0,i.jsx)(n.p,{children:"\u4f7f\u7528\u7ed9\u5b9a\u7684\u9009\u9879\u521b\u5efa\u4e00\u4e2a\u4e0d\u53d8\u6027\u68c0\u67e5\u4e2d\u95f4\u4ef6\u7684\u5b9e\u4f8b\u3002"}),"\n",(0,i.jsxs)(n.p,{children:["\u4f60\u6700\u53ef\u80fd\u4e0d\u9700\u8981\u81ea\u5df1\u8c03\u7528\u8fd9\u4e2a\uff0c\u56e0\u4e3a",(0,i.jsx)(n.code,{children:"getDefaultMiddleware"}),"\u5df2\u7ecf\u8fd9\u6837\u505a\u4e86\u3002"]}),"\n",(0,i.jsx)(n.p,{children:"\u793a\u4f8b\uff1a"}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"// \u6587\u4ef6\uff1aexampleSlice.ts\n\nimport { createSlice } from '@reduxjs/toolkit'\n\nexport const exampleSlice = createSlice({\n  name: 'example',\n  initialState: {\n    user: '\u5c06\u8ddf\u8e2a\u66f4\u6539',\n    ignoredPath: '\u5355\u7ea7',\n    ignoredNested: {\n      one: '\u4e00',\n      two: '\u4e8c',\n    },\n  },\n  reducers: {},\n})\n\nexport default exampleSlice.reducer\n\n// \u6587\u4ef6\uff1astore.ts\n\nimport {\n  configureStore,\n  createImmutableStateInvariantMiddleware,\n  Tuple,\n} from '@reduxjs/toolkit'\n\nimport exampleSliceReducer from './exampleSlice'\n\nconst immutableInvariantMiddleware = createImmutableStateInvariantMiddleware({\n  ignoredPaths: ['ignoredPath', 'ignoredNested.one', 'ignoredNested.two'],\n})\n\nconst store = configureStore({\n  reducer: exampleSliceReducer,\n  // \u6ce8\u610f\uff0c\u8fd9\u5c06\u66ff\u6362\u6240\u6709\u9ed8\u8ba4\u7684\u4e2d\u95f4\u4ef6\n  middleware: () => new Tuple(immutableInvariantMiddleware),\n})\n"})}),"\n",(0,i.jsxs)(n.p,{children:["\u4f7f\u7528",(0,i.jsx)(n.a,{href:"./getDefaultMiddleware",children:"getDefaultMiddleware"}),"\u5728\u4e0d\u79fb\u9664\u6240\u6709\u5176\u4ed6\u4e2d\u95f4\u4ef6\u7684\u60c5\u51b5\u4e0b\u505a\u540c\u6837\u7684\u4e8b\u60c5\uff1a"]}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-ts",children:"// \u6587\u4ef6\uff1aexampleSlice.ts noEmit\n\nimport { createSlice } from '@reduxjs/toolkit'\n\nexport const exampleSlice = createSlice({\n  name: 'example',\n  initialState: {\n    user: '\u5c06\u8ddf\u8e2a\u66f4\u6539',\n    ignoredPath: '\u5355\u7ea7',\n    ignoredNested: {\n      one: '\u4e00',\n      two: '\u4e8c',\n    },\n  },\n  reducers: {},\n})\n\nexport default exampleSlice.reducer\n\n// \u6587\u4ef6\uff1astore.ts\nimport { configureStore } from '@reduxjs/toolkit'\n\nimport exampleSliceReducer from './exampleSlice'\n\nconst store = configureStore({\n  reducer: exampleSliceReducer,\n  // \u8fd9\u5c06\u7528\u5b9a\u5236\u7248\u672c\u66ff\u6362\u539f\u59cb\u7684\u9ed8\u8ba4\u4e2d\u95f4\u4ef6\n  middleware: (getDefaultMiddleware) =>\n    getDefaultMiddleware({\n      immutableCheck: {\n        ignoredPaths: ['ignoredPath', 'ignoredNested.one', 'ignoredNested.two'],\n      },\n    }),\n})\n"})}),"\n",(0,i.jsx)(n.h3,{id:"isimmutabledefault",children:(0,i.jsx)(n.code,{children:"isImmutableDefault"})}),"\n",(0,i.jsx)(n.p,{children:'"\u8fd9\u4e2a\u503c\u662f\u4e0d\u53ef\u53d8\u7684\u5417?"\u68c0\u67e5\u7684\u9ed8\u8ba4\u5b9e\u73b0\u3002\u76ee\u524d\u5b9e\u73b0\u4e3a\uff1a'}),"\n",(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-js",children:"return (\n  typeof value !== 'object' || value === null || typeof value === 'undefined'\n)\n"})}),"\n",(0,i.jsx)(n.p,{children:"\u8fd9\u5c06\u5bf9\u539f\u59cb\u7c7b\u578b\uff08\u5982\u6570\u5b57\u3001\u5b57\u7b26\u4e32\u3001\u5e03\u5c14\u503c\u3001null\u548cundefined\uff09\u8fd4\u56detrue"})]})}function u(e={}){const{wrapper:n}={...(0,r.R)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},8453:(e,n,t)=>{t.d(n,{R:()=>l,x:()=>d});var i=t(6540);const r={},a=i.createContext(r);function l(e){const n=i.useContext(a);return i.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function d(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:l(e.components),i.createElement(a.Provider,{value:n},e.children)}}}]);