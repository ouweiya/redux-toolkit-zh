"use strict";(self.webpackChunkredux_toolkit_zh=self.webpackChunkredux_toolkit_zh||[]).push([[9250],{8260:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>s,toc:()=>d});var t=i(4848),o=i(8453);const a={id:"conditional-fetching",title:"Conditional Fetching",sidebar_label:"Conditional Fetching",hide_title:!0,description:"RTK Query > Usage > Conditional Fetching: skipping fetching if needed"},r="Conditional Fetching",s={id:"rtk-query/usage/conditional-fetching",title:"Conditional Fetching",description:"RTK Query > Usage > Conditional Fetching: skipping fetching if needed",source:"@site/docs/rtk-query/usage/conditional-fetching.mdx",sourceDirName:"rtk-query/usage",slug:"/rtk-query/usage/conditional-fetching",permalink:"/redux-toolkit-zh/rtk-query/usage/conditional-fetching",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/rtk-query/usage/conditional-fetching.mdx",tags:[],version:"current",frontMatter:{id:"conditional-fetching",title:"Conditional Fetching",sidebar_label:"Conditional Fetching",hide_title:!0,description:"RTK Query > Usage > Conditional Fetching: skipping fetching if needed"},sidebar:"docs",previous:{title:"Manual Cache Updates",permalink:"/redux-toolkit-zh/rtk-query/usage/manual-cache-updates"},next:{title:"Error Handling",permalink:"/redux-toolkit-zh/rtk-query/usage/error-handling"}},l={},d=[{value:"Overview",id:"overview",level:2},{value:"Conditional Fetching Example",id:"conditional-fetching-example",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"\xa0"}),"\n",(0,t.jsx)(n.h1,{id:"conditional-fetching",children:"Conditional Fetching"}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"Query hooks automatically begin fetching data as soon as the component is mounted. But, there are use cases where you may want to delay fetching data until some condition becomes true. RTK Query supports conditional fetching to enable that behavior."}),"\n",(0,t.jsxs)(n.p,{children:["If you want to prevent a query from automatically running, you can use the ",(0,t.jsx)(n.code,{children:"skip"})," parameter in a hook."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",metastring:'no-transpile title="Skip example"',children:"const Pokemon = ({ name, skip }: { name: string; skip: boolean }) => {\n  const { data, error, status } = useGetPokemonByNameQuery(name, {\n    skip,\n  });\n\n  return (\n    <div>\n      {name} - {status}\n    </div>\n  );\n};\n"})}),"\n",(0,t.jsxs)(n.p,{children:["When ",(0,t.jsx)(n.code,{children:"skip"})," is true (or ",(0,t.jsx)(n.code,{children:"skipToken"})," is passed in as ",(0,t.jsx)(n.code,{children:"arg"}),"):"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"If the query has cached data:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The cached data ",(0,t.jsx)(n.strong,{children:"will not be used"})," on the initial load, and will ignore updates from any identical query until the ",(0,t.jsx)(n.code,{children:"skip"})," condition is removed"]}),"\n",(0,t.jsxs)(n.li,{children:["The query will have a status of ",(0,t.jsx)(n.code,{children:"uninitialized"})]}),"\n",(0,t.jsxs)(n.li,{children:["If ",(0,t.jsx)(n.code,{children:"skip: false"})," is set after the initial load, the cached result will be used"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"If the query does not have cached data:"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["The query will have a status of ",(0,t.jsx)(n.code,{children:"uninitialized"})]}),"\n",(0,t.jsx)(n.li,{children:"The query will not exist in the state when viewed with the dev tools"}),"\n",(0,t.jsx)(n.li,{children:"The query will not automatically fetch on mount"}),"\n",(0,t.jsx)(n.li,{children:"The query will not automatically run when additional components with the same query are added that do run"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["Typescript users may wish to use ",(0,t.jsx)(n.a,{href:"/redux-toolkit-zh/rtk-query/api/created-api/hooks#skiptoken",children:(0,t.jsx)(n.code,{children:"skipToken"})})," as an alternative to the ",(0,t.jsx)(n.code,{children:"skip"})," option in order to skip running a query, while still keeping types for the endpoint accurate."]})}),"\n",(0,t.jsx)(n.h2,{id:"conditional-fetching-example",children:"Conditional Fetching Example"}),"\n",(0,t.jsx)("iframe",{src:"https://codesandbox.io/embed/github/reduxjs/redux-toolkit/tree/master/examples/query/react/conditional-fetching?fontsize=12&runonclick=1&hidenavigation=1&module=%2Fsrc%2FPokemon.tsx&moduleview=1&theme=dark",style:{width:"100%",height:"600px",border:0,borderRadius:"4px",overflow:"hidden"},title:"Conditional Fetching Example",allow:"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb",sandbox:"allow-modals allow-forms allow-popups allow-scripts allow-same-origin"})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(c,{...e})}):c(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>r,x:()=>s});var t=i(6540);const o={},a=t.createContext(o);function r(e){const n=t.useContext(a);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function s(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),t.createElement(a.Provider,{value:n},e.children)}}}]);