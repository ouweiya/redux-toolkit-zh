"use strict";(self.webpackChunkredux_toolkit_zh=self.webpackChunkredux_toolkit_zh||[]).push([[9250],{8260:(e,n,i)=>{i.r(n),i.d(n,{assets:()=>l,contentTitle:()=>s,default:()=>h,frontMatter:()=>r,metadata:()=>a,toc:()=>c});var t=i(4848),o=i(8453);const r={id:"conditional-fetching",title:"\u6761\u4ef6\u83b7\u53d6",sidebar_label:"\u6761\u4ef6\u83b7\u53d6",hide_title:!0,description:"RTK Query > Usage > Conditional Fetching: skipping fetching if needed"},s="Conditional Fetching",a={id:"rtk-query/usage/conditional-fetching",title:"\u6761\u4ef6\u83b7\u53d6",description:"RTK Query > Usage > Conditional Fetching: skipping fetching if needed",source:"@site/docs/rtk-query/usage/conditional-fetching.mdx",sourceDirName:"rtk-query/usage",slug:"/rtk-query/usage/conditional-fetching",permalink:"/redux-toolkit-zh/rtk-query/usage/conditional-fetching",draft:!1,unlisted:!1,editUrl:"https://github.com/facebook/docusaurus/tree/main/packages/create-docusaurus/templates/shared/docs/rtk-query/usage/conditional-fetching.mdx",tags:[],version:"current",frontMatter:{id:"conditional-fetching",title:"\u6761\u4ef6\u83b7\u53d6",sidebar_label:"\u6761\u4ef6\u83b7\u53d6",hide_title:!0,description:"RTK Query > Usage > Conditional Fetching: skipping fetching if needed"},sidebar:"docs",previous:{title:"\u624b\u52a8\u7f13\u5b58\u66f4\u65b0",permalink:"/redux-toolkit-zh/rtk-query/usage/manual-cache-updates"},next:{title:"\u9519\u8bef\u5904\u7406",permalink:"/redux-toolkit-zh/rtk-query/usage/error-handling"}},l={},c=[{value:"Overview",id:"overview",level:2},{value:"Conditional Fetching Example",id:"conditional-fetching-example",level:2}];function d(e){const n={a:"a",admonition:"admonition",code:"code",h1:"h1",h2:"h2",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.p,{children:"\xa0"}),"\n",(0,t.jsx)(n.h1,{id:"conditional-fetching",children:"Conditional Fetching"}),"\n",(0,t.jsx)(n.h2,{id:"overview",children:"Overview"}),"\n",(0,t.jsx)(n.p,{children:"Query hooks automatically begin fetching data as soon as the component is mounted. But, there are use cases where you may want to delay fetching data until some condition becomes true. RTK Query supports conditional fetching to enable that behavior."}),"\n",(0,t.jsxs)(n.p,{children:["If you want to prevent a query from automatically running, you can use the ",(0,t.jsx)(n.code,{children:"skip"})," parameter in a hook."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-tsx",children:'// \u4ee3\u7801\u5757\u5143\u6570\u636e \u4e0d\u8f6c\u8bd1 \u6807\u9898="Skip \u793a\u4f8b"\nconst Pokemon = ({ name, skip }: { name: string; skip: boolean }) => {\n  const { data, error, status } = useGetPokemonByNameQuery(name, {\n    skip,\n  });\n\n  return (\n    <div>\n      {name} - {status}\n    </div>\n  );\n};\n'})}),"\n",(0,t.jsxs)(n.p,{children:["\u5f53 ",(0,t.jsx)(n.code,{children:"skip"})," \u4e3a true\uff08\u6216\u8005 ",(0,t.jsx)(n.code,{children:"arg"})," \u4e2d\u4f20\u5165 ",(0,t.jsx)(n.code,{children:"skipToken"}),"\uff09\u65f6\uff1a"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u5982\u679c\u67e5\u8be2\u6709\u7f13\u5b58\u6570\u636e\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u521d\u59cb\u52a0\u8f7d\u65f6",(0,t.jsx)(n.strong,{children:"\u4e0d\u4f1a\u4f7f\u7528"}),"\u7f13\u5b58\u6570\u636e\uff0c\u5e76\u4e14\u5728 ",(0,t.jsx)(n.code,{children:"skip"})," \u6761\u4ef6\u88ab\u79fb\u9664\u4e4b\u524d\uff0c\u5c06\u5ffd\u7565\u6765\u81ea\u4efb\u4f55\u76f8\u540c\u67e5\u8be2\u7684\u66f4\u65b0"]}),"\n",(0,t.jsxs)(n.li,{children:["\u67e5\u8be2\u7684\u72b6\u6001\u5c06\u4e3a ",(0,t.jsx)(n.code,{children:"uninitialized"})]}),"\n",(0,t.jsxs)(n.li,{children:["\u5982\u679c\u5728\u521d\u59cb\u52a0\u8f7d\u540e\u8bbe\u7f6e ",(0,t.jsx)(n.code,{children:"skip: false"}),"\uff0c\u5c06\u4f7f\u7528\u7f13\u5b58\u7ed3\u679c"]}),"\n"]}),"\n"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"\u5982\u679c\u67e5\u8be2\u6ca1\u6709\u7f13\u5b58\u6570\u636e\uff1a"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["\u67e5\u8be2\u7684\u72b6\u6001\u5c06\u4e3a ",(0,t.jsx)(n.code,{children:"uninitialized"})]}),"\n",(0,t.jsx)(n.li,{children:"\u5728\u4f7f\u7528\u5f00\u53d1\u5de5\u5177\u67e5\u770b\u65f6\uff0c\u67e5\u8be2\u4e0d\u4f1a\u5b58\u5728\u4e8e\u72b6\u6001\u4e2d"}),"\n",(0,t.jsx)(n.li,{children:"\u67e5\u8be2\u4e0d\u4f1a\u5728\u6302\u8f7d\u65f6\u81ea\u52a8\u83b7\u53d6"}),"\n",(0,t.jsx)(n.li,{children:"\u5f53\u6dfb\u52a0\u4e86\u5176\u4ed6\u8fd0\u884c\u76f8\u540c\u67e5\u8be2\u7684\u7ec4\u4ef6\u65f6\uff0c\u67e5\u8be2\u4e0d\u4f1a\u81ea\u52a8\u8fd0\u884c"}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{type:"tip",children:(0,t.jsxs)(n.p,{children:["Typescript users may wish to use ",(0,t.jsx)(n.a,{href:"/redux-toolkit-zh/rtk-query/api/created-api/hooks#skiptoken",children:(0,t.jsx)(n.code,{children:"skipToken"})})," as an alternative to the ",(0,t.jsx)(n.code,{children:"skip"})," option in order to skip running a query, while still keeping types for the endpoint accurate."]})}),"\n",(0,t.jsx)(n.h2,{id:"conditional-fetching-example",children:"Conditional Fetching Example"}),"\n",(0,t.jsx)("iframe",{src:"https://codesandbox.io/embed/github/reduxjs/redux-toolkit/tree/master/examples/query/react/conditional-fetching?fontsize=12&runonclick=1&hidenavigation=1&module=%2Fsrc%2FPokemon.tsx&moduleview=1&theme=dark",style:{width:"100%",height:"600px",border:0,borderRadius:"4px",overflow:"hidden"},title:"Conditional Fetching Example",allow:"geolocation; microphone; camera; midi; vr; accelerometer; gyroscope; payment; ambient-light-sensor; encrypted-media; usb",sandbox:"allow-modals allow-forms allow-popups allow-scripts allow-same-origin"})]})}function h(e={}){const{wrapper:n}={...(0,o.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(d,{...e})}):d(e)}},8453:(e,n,i)=>{i.d(n,{R:()=>s,x:()=>a});var t=i(6540);const o={},r=t.createContext(o);function s(e){const n=t.useContext(r);return t.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:s(e.components),t.createElement(r.Provider,{value:n},e.children)}}}]);